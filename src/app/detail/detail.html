<!-- start banner -->
<section class="banner">
  <h3>Product detail</h3>
  <div class="position">
    <i class="bi bi-house-fill me-2" style="cursor: pointer" routerLink="/"></i>
    <i class="bi bi-chevron-right me-2"></i>
    <span>Detail</span>
    <i class="bi bi-chevron-right me-2"></i>
    <span style="color: var(--text-secondary-color)"
      >{{bookDetail().title}}</span
    >
  </div>
</section>
<!-- end::banner -->

<!-- start detail info -->
<section class="detail-info">
  <div class="col-12">
    <div class="row">
      <!-- picture -->
      <div class="col-md-6 ps-5 pe-5">
        <div class="detail-img">
          <img [src]="bookDetail().imageUrl" alt="book detail" />
        </div>
      </div>
      <!-- book details -->
      <div class="col-md-6">
        <!-- title and price -->
        <div class="tetail-text">
          <h1>{{bookDetail().title}}</h1>
          <div class="review-info">
            <div class="star">
              @for(s of stars; track $index){ @if(s <= averageRating()){
              <i class="bi bi-star-fill"></i>
              } @else {
              <i class="bi bi-star"></i>
              } }
            </div>
            @if(bookDetail().reviewerInfo && bookDetail().reviewerInfo.length > 0 && bookDetail().reviewerInfo[0].id != ''){
              <span (click)="toggleReviewsBox(2); scrollToReview(gotoReview);">({{bookDetail().reviewerInfo.length}} {{this.bookDetail().reviewerInfo.length > 1 ? 'customers': 'customer'}} review)</span>
            }
          </div>
          <h1 class="price">{{bookDetail().price | currency}}</h1>
          <p>{{bookDetail().description}}</p>
        </div>
        <!-- add to cart button -->
        <div class="add-to-cart">
          <div class="quantity">
            <button class="btn decrease" (click)="DecreaseQuantyty()"><span>-</span></button>
            <div class="qty"><span>{{quantity}}</span></div>
            <button class="btn increase" (click)="IncreaseQuantity()"><span>+</span></button>
          </div>
          <div class="button">
            <button class="btn me-2 ps-4 pe-4" (click)="AddToCartFromDetail()">
              <i class="bi bi-cart3 me-3"></i>Add to cart
            </button>
            <button class="btn ps-3 pe-3" (click)="toggleDetailHeart()">
              <i class="bi {{heart()}}"></i>
            </button>
          </div>
          <div class="number-orders">
            <i class="bi bi-cart3 me-2"></i>
            10 people have added this product to their cart
          </div>
          <div class="help">
            <i class="bi bi-info-circle-fill"></i>
            <div class="help-txt">
              <p>If you need help or ask about information contact us</p>
              <h6>Or fast contact call to this <span>0123456789</span></h6>
            </div>
          </div>
        </div>
        <!-- more info -->
        <div class="info">
          <div class="row">
            <div class="col-3">Author</div>
            @if(bookDetail().authorInfo){
            <div class="col-9">{{bookDetail().authorInfo.name}}</div>
            }
          </div>
          <div class="row">
            <div class="col-3">Category</div>
            <div class="col-9">{{bookDetail().category}}</div>
          </div>
          <div class="row">
            <div class="col-3">Publish date</div>
            <div class="col-9">{{bookDetail().publishDate | date}}</div>
          </div>
        </div>
        <!-- pros from us -->
        <div class="pros">
          <div>
            <i class="bi bi-check-circle me-3"></i>
            <span>Free shipping on all orders over $100</span>
          </div>
          <div>
            <i class="bi bi-check-circle me-3"></i>
            <span>14 days easy refund & returns</span>
          </div>
          <div>
            <i class="bi bi-check-circle me-3"></i>
            <span>Product taxes and customs duties included</span>
          </div>
        </div>
        <!-- payment method -->
        <div class="payment-method">
          <div class="row">
            <div class="col-3">Payment method</div>
            <div class="col-9">
              <div class="bank">
                <img
                  src="https://play-lh.googleusercontent.com/WU6sZMD1UspzwqYnlACtmN60rckp8hoINSgsR21mKLJBbsHPwXtzwvOocpjC7FcO1g"
                  alt=""
                />
              </div>
              <div class="bank">
                <img
                  src="https://assets.weforum.org/organization/image/oW42OTEcgNgP2WDuDnO38N1bnVQcAeYm7TnLJlxF0OE.jpg"
                  alt=""
                />
              </div>
              <div class="bank">
                <img
                  src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTfHegmPP6NiwrwAeVMelNsNGwuFhXgjYfTTQ&s"
                  alt=""
                />
              </div>
              <div class="bank">
                <img
                  src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSrWXGDW65mRC-ef6y4SIDWOg7pUPJrlVmNqA&s"
                  alt=""
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- end::detail info -->

<!-- start reviews -->
<section class="reviews" #gotoReview>
  <ul class="menu">
    <li (click)="toggleReviewsBox(1)" class="active" #list1>Description</li>
    <li (click)="toggleReviewsBox(2)" #list2>Reviews</li>
    <li (click)="toggleReviewsBox(3)" #list3>FAQ</li>
  </ul>
  <div class="menu-info">
    <div class="description" [style.display]="display1">
      <h5>Your Personal Assistant</h5>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Dicta, sed?
        Accusantium quae sequi quisquam at sapiente. Totam magnam ad voluptate
        iusto nulla facere nesciunt! Iste maiores nesciunt adipisci beatae
        veritatis!
      </p>
      <h5>Your Personal Assistant</h5>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Est, facilis
        illum molestiae placeat esse minus quisquam mollitia fugit ut dicta,
        alias provident obcaecati omnis itaque at necessitatibus recusandae
        reprehenderit similique? Deserunt, incidunt illum nulla totam at esse ut
        nisi sit repudiandae quia nemo vel ratione dolores, alias ipsum deleniti
        commodi saepe adipisci! Hic asperiores id ex porro quis, dolore
        repudiandae.
      </p>
      <h5>Your Personal Assistant</h5>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Maxime itaque
        beatae at. Incidunt, porro facere. Atque esse molestiae consequatur
        obcaecati quam iusto hic reprehenderit aspernatur, maiores tempora
        dolores doloribus repudiandae. Blanditiis veritatis quo et velit impedit
        quia porro quam minus deserunt, veniam a neque quibusdam alias ducimus,
        suscipit reprehenderit distinctio officia totam similique cum illo quas
        nobis. Iusto, eaque labore? Quibusdam tempore aperiam culpa sequi sint
        eum fugit harum reprehenderit error dignissimos esse ullam rerum aliquam
        accusamus odio atque nihil, quasi eius saepe et odit sunt id adipisci?
        Rem, sint. Illo magni sunt optio dolorum quis magnam porro quasi esse
        aliquid sapiente fugiat rerum similique, molestias deleniti! Optio
        magnam vero in natus, sunt, quod laboriosam sequi accusantium obcaecati
        qui molestias?
      </p>
    </div>
    <div class="review" [style.display]="display2">
      @if(this.bookDetail().reviewerInfo){
        @if(this.bookDetail().reviewerInfo[0].id != ''){
        <h5 class="mb-4">{{this.bookDetail().reviewerInfo.length}} {{this.bookDetail().reviewerInfo.length > 1 ? 'reviews': 'review'}}</h5>
        } @else {
          <h5 class="mb-4">No review yet</h5>
        }
        @for(rev of bookDetail().reviewerInfo; track $index) { 
          @if(rev.id != ''){
        <div class="reviewers">
          <div class="reviewer">
            <div class="img">
            <img [src]="rev.imageUrl" alt="user image"/>
          </div>
          <div class="comment">
            <h6>{{rev.name}}</h6>
            <p class="mt-3">{{rev.comment}}</p>
            <div class="star">
              @for(s of stars; track $index){ 
                @if(s <= rev.rate){
              <i class="bi bi-star-fill"></i>
              } @else {
              <i class="bi bi-star"></i>
              } }
            </div>
          </div>
        </div>
      </div>
      } } }
      <h5 class="mt-3 mb-3">Add yours</h5>
      <p class="ms-3">Your rating *</p>
      <div class="star ms-3">
        @for(r of rating; track $index){
        <i class="bi rating-star {{r}}" 
        (mouseleave)="fillRating(review.rate)" 
        (mousemove)="fillRating($index + 1)"
        (click)="setRating($index + 1)"></i>
        }
      </div>
      <p class="ms-3 mt-3">Your review *</p>
      <textarea class="ms-3 comment-text" [(ngModel)]="review.comment" name="comment" id=""></textarea>
      <button class="btn btn-dark mt-3 ms-3" style="width: fit-content" (click)="AddComment()">
        Submit
      </button>
    </div>
    <div class="faq" [style.display]="display3">
      <div class="row">
        <div class="col-md-4">
          <img
            src="https://xtratheme.com/wp-content/uploads/2024/04/faq.jpg"
            alt=""
          />
        </div>
        <ul class="col-md-8">
          <li>
            <span>What payments method do you accept?</span>
            <p>
              Lorem ipsum dolor sit, amet consectetur adipisicing elit. Porro,
              eveniet perspiciatis blanditiis at enim veniam laboriosam sed id
              fugiat, quibusdam nobis. Dolor sapiente earum id iusto doloremque
              blanditiis voluptate magni!
            </p>
          </li>
          <li>
            <span>What payments method do you accept?</span>
            <p>
              Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aliquid
              quas veniam labore facilis quo magnam dolorem vitae eveniet
              excepturi, enim nesciunt consectetur corporis? Consequatur,
              obcaecati impedit culpa dignissimos vero natus. Minima autem
              quidem eos facilis officia, voluptatibus nam libero quas
              repudiandae dolor, pariatur in iure provident est. Tempora,
              pariatur sed delectus ad dignissimos saepe sit eveniet
              voluptatibus, voluptate esse repellendus. Error molestiae, laborum
              dolores aspernatur adipisci id veritatis dolorum officia nihil
              suscipit accusamus, mollitia reprehenderit. Aspernatur nesciunt
              eum laudantium sed exercitationem nam, consequatur sit,
              consectetur, quasi molestias facere accusantium aliquid.
            </p>
          </li>
          <li>
            <span>What payments method do you accept?</span>
            <p>
              Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aliquid
              quas veniam labore facilis quo magnam dolorem vitae eveniet
              excepturi, enim nesciunt consectetur corporis? Consequatur,
              obcaecati impedit culpa dignissimos vero natus. Minima autem
              quidem eos facilis officia, voluptatibus nam libero quas
              repudiandae dolor, pariatur in iure provident est. Tempora,
              pariatur sed delectus ad dignissimos saepe sit eveniet
              voluptatibus, voluptate esse repellendus. Error molestiae, laborum
              dolores aspernatur adipisci id veritatis dolorum officia nihil
              suscipit accusamus, mollitia reprehenderit. Aspernatur nesciunt
              eum laudantium sed exercitationem nam, consequatur sit,
              consectetur, quasi molestias facere accusantium aliquid.
            </p>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>
<!-- end::reviews -->

<!-- start ralated products -->
<section class="ralated-products">
  <div class="ralated">
    <!-- title -->
    <div class="title-box">
      <h5>Ralated products</h5>
    </div>
    <!-- ralated card slider -->
    <div class="slider-container">
      <button class="arrow left" (click)="scrollLeft()">
        <i class="bi bi-arrow-left"></i>
      </button>
      <div class="slider" #slider>
        <app-card [Items]="books()"></app-card>
      </div>
      <button class="arrow right" (click)="scrollRight()">
        <i class="bi bi-arrow-right"></i>
      </button>
    </div>
  </div>
</section>
<!-- end::ralated products -->

<!-- <button class="btn btn-danger" (click)="averageRating()">AVG</button> -->
